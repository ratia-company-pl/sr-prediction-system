<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4äº‹æ¥­éƒ¨çµ±åˆPLãƒã‚¹ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ  - SRã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Hiragino Sans", "Yu Gothic UI", "Meiryo", sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }

        .status-badge {
            display: inline-block;
            background: linear-gradient(45deg, #00cec9, #55a3ff);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-top: 10px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card h3 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 18px;
            border-left: 4px solid #764ba2;
            padding-left: 10px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 12px;
            color: #64748b;
        }

        .sr-data-section {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #2196f3;
        }

        .sr-data-section h4 {
            color: #1976d2;
            margin-bottom: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .sr-data-section h4:before {
            content: "ğŸ“Š";
            margin-right: 8px;
        }

        .store-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .store-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            border: 1px solid #e3f2fd;
        }

        .store-name {
            font-size: 12px;
            color: #1976d2;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .store-value {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }

        .integration-status {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c8);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #4caf50;
        }

        .integration-status h4 {
            color: #2e7d32;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .integration-status h4:before {
            content: "ğŸ”„";
            margin-right: 8px;
        }

        .data-sync-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .sync-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 6px;
            padding: 8px;
            text-align: center;
            border: 1px solid #c8e6c8;
        }

        .sync-status {
            font-size: 10px;
            color: #2e7d32;
            font-weight: bold;
        }

        .sync-data {
            font-size: 11px;
            color: #333;
            margin-top: 3px;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .control-panel h3 {
            color: #764ba2;
            margin-bottom: 15px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: white;
        }

        .btn-info {
            background: linear-gradient(45deg, #2196f3, #1976d2);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid;
        }

        .alert-success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .alert-info {
            background: #d1ecf1;
            border-color: #bee5eb;
            color: #0c5460;
        }

        .sr-monthly-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 11px;
        }

        .sr-monthly-table th,
        .sr-monthly-table td {
            border: 1px solid #e0e0e0;
            padding: 6px;
            text-align: center;
        }

        .sr-monthly-table th {
            background: #f5f5f5;
            color: #333;
            font-weight: bold;
        }

        .sr-monthly-table td {
            background: white;
        }

        .update-timestamp {
            text-align: center;
            color: #666;
            font-size: 12px;
            margin-top: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .store-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .data-sync-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>4äº‹æ¥­éƒ¨çµ±åˆPLãƒã‚¹ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ </h1>
            <div class="subtitle">çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - 4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆç‰ˆï¼ˆPhase 2-3å®Œæˆï¼‰</div>
            <div class="status-badge">Phase 2-3: 4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆå®Œäº† | çµ±åˆP&Lè‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒä¸­</div>
        </div>

            <div class="control-panel">
            <h3>ğŸ¢ 4äº‹æ¥­éƒ¨çµ±åˆPLãƒã‚¹ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ åˆ¶å¾¡</h3>
            <div class="button-group">
                <button class="btn btn-success" onclick="loadCompleteIntegratedData()">4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿</button>
                <button class="btn btn-primary" onclick="generateConsolidatedPL()">çµ±åˆP&Lè‡ªå‹•ç”Ÿæˆ</button>
                <button class="btn btn-info" onclick="syncAllData()">å…¨äº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿åŒæœŸ</button>
                <button class="btn btn-info" onclick="validateDataIntegrity()">çµ±åˆãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§æ¤œè¨¼</button>
                <button class="btn btn-primary" onclick="exportIntegratedReport()">å½¹å“¡å‘ã‘çµ±åˆãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›</button>
            </div>
        </div>

        <div class="integration-status">
            <h4>çµ±åˆãƒ‡ãƒ¼ã‚¿åŒæœŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h4>
            <div class="data-sync-grid">
                <div class="sync-item">
                    <div class="sync-status">âœ… SRã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿</div>
                    <div class="sync-data">6åº—èˆ—ãƒ‡ãƒ¼ã‚¿åŒæœŸæ¸ˆ</div>
                </div>
                <div class="sync-item">
                    <div class="sync-status">âœ… RCã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿</div>
                    <div class="sync-data">å±•ç¤ºä¼šROIãƒ»å›ºå®šå¤‰å‹•è²»</div>
                </div>
                <div class="sync-item">
                    <div class="sync-status">âœ… Wã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿</div>
                    <div class="sync-data">12æ®µéšäººä»¶è²»ãƒ»æ±ºæ¸ˆæ‰‹æ•°æ–™</div>
                </div>
                <div class="sync-item">
                    <div class="sync-status">âœ… RCDã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿</div>
                    <div class="sync-data">å¤–éƒ¨å§”è¨—ãƒ»0å††å‡¦ç†ãƒ»åŠ¹ç‡æ€§</div>
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="card">
                <h3>ğŸ“ˆ çµ±åˆçµŒå–¶æŒ‡æ¨™ï¼ˆSRã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿é€£æºï¼‰</h3>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="total-sales">212,157</div>
                        <div class="metric-label">å¹´é–“çµ±åˆå£²ä¸Šï¼ˆä¸‡å††ï¼‰</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="operating-profit">5,763</div>
                        <div class="metric-label">çµ±åˆå–¶æ¥­åˆ©ç›Šï¼ˆä¸‡å††ï¼‰</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="profit-margin">2.7%</div>
                        <div class="metric-label">çµ±åˆå–¶æ¥­åˆ©ç›Šç‡</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="prediction-accuracy">89.4%</div>
                        <div class="metric-label">çµ±åˆåŠ¹ç‡æ€§æŒ‡æ¨™</div>
                    </div>
                </div>

                <div class="alert alert-success">
                    <strong>4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆå®Œäº†:</strong> SRãƒ»RCãƒ»Wãƒ»RCDäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ãŒçµ±åˆP&Lè‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã§ç¨¼åƒä¸­
                </div>
            </div>

        <div class="dashboard-grid">
            <div class="card">
                <h3>ğŸ“ˆ çµ±åˆçµŒå–¶æŒ‡æ¨™ï¼ˆ3äº‹æ¥­éƒ¨çµ±åˆï¼‰</h3>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="total-sales">49,325</div>
                        <div class="metric-label">å¹´é–“çµ±åˆå£²ä¸Šï¼ˆä¸‡å††ï¼‰</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="operating-profit">854</div>
                        <div class="metric-label">çµ±åˆå–¶æ¥­åˆ©ç›Šï¼ˆä¸‡å††ï¼‰</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="profit-margin">1.7%</div>
                        <div class="metric-label">çµ±åˆå–¶æ¥­åˆ©ç›Šç‡</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="prediction-accuracy">89.8%</div>
                        <div class="metric-label">çµ±åˆAIäºˆæ¸¬ç²¾åº¦</div>
                    </div>
                </div>

                <div class="alert alert-success">
                    <strong>3äº‹æ¥­éƒ¨çµ±åˆå®Œäº†:</strong> SRãƒ»RCãƒ»Wäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€£æºä¸­ï¼ˆPhase 2-2å®Œäº†ï¼‰
                </div>
            </div>

            <div class="card">
                <h3>ğŸ¢ äº‹æ¥­éƒ¨åˆ¥çµ±åˆãƒ‡ãƒ¼ã‚¿ï¼ˆPhase 2-2ï¼‰</h3>
                
                <!-- SRäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ -->
                <div class="sr-data-section">
                    <h4>SRäº‹æ¥­éƒ¨ï¼ˆ6åº—èˆ—çµ±åˆï¼‰</h4>
                    <div class="store-grid">
                        <div class="store-card">
                            <div class="store-name">å¹´é–“å£²ä¸Š</div>
                            <div class="store-value">31,388ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">å–¶æ¥­åˆ©ç›Š</div>
                            <div class="store-value">-454ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">åˆ©ç›Šç‡</div>
                            <div class="store-value">-1.4%</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">AIäºˆæ¸¬ç²¾åº¦</div>
                            <div class="store-value">91.2%</div>
                        </div>
                    </div>
                </div>

            <div class="card">
                <h3>ğŸ¢ 4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆãƒ‡ãƒ¼ã‚¿ï¼ˆPhase 2-3å®Œæˆï¼‰</h3>
                
                <!-- SRäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ -->
                <div class="sr-data-section">
                    <h4>SRäº‹æ¥­éƒ¨ï¼ˆ6åº—èˆ—çµ±åˆãƒ»AIäºˆæ¸¬91.2%ï¼‰</h4>
                    <div class="store-grid">
                        <div class="store-card">
                            <div class="store-name">å¹´é–“å£²ä¸Š</div>
                            <div class="store-value">31,388ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">å–¶æ¥­åˆ©ç›Š</div>
                            <div class="store-value">-454ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">åˆ©ç›Šç‡</div>
                            <div class="store-value">-1.4%</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">å•†å“ä»•å…¥ç‡</div>
                            <div class="store-value">27.2%</div>
                        </div>
                    </div>
                </div>

                <!-- RCäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ -->
                <div class="sr-data-section" style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); border-color: #ff9800;">
                    <h4>RCäº‹æ¥­éƒ¨ï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ‡ãƒ«ãƒ»å±•ç¤ºä¼šROIæœ€é©åŒ–ï¼‰</h4>
                    <div class="store-grid">
                        <div class="store-card">
                            <div class="store-name">å¹´é–“å£²ä¸Š</div>
                            <div class="store-value">18,000ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">å–¶æ¥­åˆ©ç›Š</div>
                            <div class="store-value">1,012ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">å›ºå®šè²»ç‡</div>
                            <div class="store-value">29.8%</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">å±•ç¤ºä¼šROI</div>
                            <div class="store-value">155.2%</div>
                        </div>
                    </div>
                </div>

                <!-- Wäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ -->
                <div class="sr-data-section" style="background: linear-gradient(135deg, #f3e5f5, #e1bee7); border-color: #9c27b0;">
                    <h4>Wäº‹æ¥­éƒ¨ï¼ˆå›ºå®šé‡‘é¡æ–¹å¼ãƒ»æ±ºæ¸ˆæ‰‹æ•°æ–™æœ€é©åŒ–ï¼‰</h4>
                    <div class="store-grid">
                        <div class="store-card">
                            <div class="store-name">å¹´é–“å£²ä¸Š</div>
                            <div class="store-value">11,527ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">å–¶æ¥­åˆ©ç›Š</div>
                            <div class="store-value">296ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">åˆ©ç›Šç‡</div>
                            <div class="store-value">2.6%</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">æ±ºæ¸ˆæ‰‹æ•°æ–™å‰Šæ¸›</div>
                            <div class="store-value">456ä¸‡å††/å¹´</div>
                        </div>
                    </div>
                </div>

                <!-- RCDäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ï¼ˆæ–°è¦è¿½åŠ ï¼‰ -->
                <div class="sr-data-section" style="background: linear-gradient(135deg, #e8f5e8, #c8e6c8); border-color: #4caf50;">
                    <h4>RCDç¤¾äº‹æ¥­éƒ¨ï¼ˆå¤–éƒ¨å§”è¨—å‹ãƒ»0å††å‡¦ç†ãƒ»åŠ¹ç‡æ€§è©•ä¾¡89.4%ï¼‰</h4>
                    <div class="store-grid">
                        <div class="store-card">
                            <div class="store-name">å¹´é–“å£²ä¸Š</div>
                            <div class="store-value">151,242ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">å–¶æ¥­åˆ©ç›Š</div>
                            <div class="store-value">4,909ä¸‡å††</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">åˆ©ç›Šç‡</div>
                            <div class="store-value">3.2%</div>
                        </div>
                        <div class="store-card">
                            <div class="store-name">åŠ¹ç‡æ€§è©•ä¾¡</div>
                            <div class="store-value">89.4%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>ğŸ“Š çµ±åˆP&Lè‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ </h3>
            <div class="sr-data-section">
                <h4>4äº‹æ¥­éƒ¨çµ±åˆæç›Šè¨ˆç®—æ›¸ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰</h4>
                <table class="sr-monthly-table">
                    <thead>
                        <tr>
                            <th>é …ç›®</th>
                            <th>SRäº‹æ¥­éƒ¨</th>
                            <th>RCäº‹æ¥­éƒ¨</th>
                            <th>Wäº‹æ¥­éƒ¨</th>
                            <th>RCDç¤¾äº‹æ¥­éƒ¨</th>
                            <th>çµ±åˆåˆè¨ˆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>å£²ä¸Šé«˜</strong></td>
                            <td>31,388</td>
                            <td>18,000</td>
                            <td>11,527</td>
                            <td>151,242</td>
                            <td><strong>212,157</strong></td>
                        </tr>
                        <tr>
                            <td><strong>å–¶æ¥­åˆ©ç›Š</strong></td>
                            <td style="color: #f44336;">-454</td>
                            <td style="color: #4caf50;">+1,012</td>
                            <td style="color: #4caf50;">+296</td>
                            <td style="color: #4caf50;">+4,909</td>
                            <td style="color: #4caf50;"><strong>+5,763</strong></td>
                        </tr>
                        <tr>
                            <td><strong>å–¶æ¥­åˆ©ç›Šç‡</strong></td>
                            <td style="color: #f44336;">-1.4%</td>
                            <td style="color: #4caf50;">5.6%</td>
                            <td style="color: #4caf50;">2.6%</td>
                            <td style="color: #4caf50;">3.2%</td>
                            <td style="color: #4caf50;"><strong>2.7%</strong></td>
                        </tr>
                        <tr>
                            <td><strong>ç‰¹å¾´ãƒ»å¼·ã¿</strong></td>
                            <td>6åº—èˆ—ãƒ»91.2%äºˆæ¸¬ç²¾åº¦</td>
                            <td>å±•ç¤ºä¼šROI155.2%</td>
                            <td>12æ®µéšäººä»¶è²»ãƒ»æ±ºæ¸ˆæœ€é©åŒ–</td>
                            <td>å¤–éƒ¨å§”è¨—ãƒ»0å††å‡¦ç†ãƒ»89.4%åŠ¹ç‡</td>
                            <td>å¤šè§’çš„åç›Šæ§‹é€ </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <h3>ğŸ” RCDç¤¾äº‹æ¥­éƒ¨è©³ç´°åˆ†æãƒ‡ãƒ¼ã‚¿</h3>
            <div class="sr-data-section">
                <h4>å¤–éƒ¨å§”è¨—å‹ç‰¹æ®Šå‡¦ç†ãƒ»0å††å‡¦ç†ãƒ»åŠ¹ç‡æ€§è©•ä¾¡</h4>
                <table class="sr-monthly-table">
                    <thead>
                        <tr>
                            <th>å‡¦ç†é …ç›®</th>
                            <th>äººä»¶è²»</th>
                            <th>ç‰©æµç®¡ç†è²»</th>
                            <th>è²©å£²ä¿ƒé€²è²»</th>
                            <th>æ”¯æ‰•æ‰‹æ•°æ–™</th>
                            <th>åŠ¹ç‡æ€§è©•ä¾¡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>0å††å‡¦ç†çŠ¶æ³</strong></td>
                            <td>0å††ï¼ˆå¤–éƒ¨å§”è¨—ï¼‰</td>
                            <td>0å††ï¼ˆå¤–éƒ¨å§”è¨—ï¼‰</td>
                            <td>0å††ï¼ˆå¤–éƒ¨å§”è¨—ï¼‰</td>
                            <td>1ä»¶90.6ä¸‡å††Ã—å›æ•°</td>
                            <td>89.4%</td>
                        </tr>
                        <tr>
                            <td><strong>å¹´é–“å®Ÿç¸¾</strong></td>
                            <td>å®Œå…¨å¤–éƒ¨å§”è¨—</td>
                            <td>å®Œå…¨å¤–éƒ¨å§”è¨—</td>
                            <td>å®Œå…¨å¤–éƒ¨å§”è¨—</td>
                            <td>å®Ÿç¸¾æº–æ‹ è¨ˆç®—</td>
                            <td>5é …ç›®è©•ä¾¡</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <h3>âš ï¸ çµ±åˆã‚¢ãƒ©ãƒ¼ãƒˆãƒ»æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
            <div class="alert alert-success">
                <strong>âœ… Phase 2-3å®Œå…¨çµ±åˆå®Œäº†:</strong> 4äº‹æ¥­éƒ¨ï¼ˆSRãƒ»RCãƒ»Wãƒ»RCDï¼‰çµ±åˆP&Lè‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ãŒç¨¼åƒä¸­
            </div>
            <div class="alert alert-success">
                <strong>ğŸ“Š çµ±åˆçµŒå–¶æˆæœ:</strong> å¹´é–“å£²ä¸Š212,157ä¸‡å††ãƒ»çµ±åˆå–¶æ¥­åˆ©ç›Š5,763ä¸‡å††ãƒ»åˆ©ç›Šç‡2.7%ã§å¥å…¨çµŒå–¶é”æˆ
            </div>
            <div class="alert alert-info">
                <strong>ğŸ’¡ é‡è¦æ”¹å–„åŠ¹æœ:</strong> RCDç¤¾ã®é«˜åç›Šæ€§ï¼ˆ151,242ä¸‡å††ãƒ»åˆ©ç›Šç‡3.2%ï¼‰ã«ã‚ˆã‚Šå…¨ç¤¾åç›Šæ§‹é€ ãŒå¤§å¹…æ”¹å–„
            </div>
            <div class="alert alert-success">
                <strong>ğŸ† ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†:</strong> 4äº‹æ¥­éƒ¨çµ±åˆPLãƒã‚¹ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ æœ¬æ ¼é‹ç”¨é–‹å§‹ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµŒå–¶ç›£è¦–ä½“åˆ¶ç¢ºç«‹
            </div>
        </div>

        <div class="update-timestamp">
            æœ€çµ‚æ›´æ–°: <span id="last-update"></span> | 4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆé€£æº: ã‚¢ã‚¯ãƒ†ã‚£ãƒ– | çµ±åˆåŠ¹ç‡æ€§: 89.4% | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†
        </div>
    </div>

    <script>
        // çµ±åˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆPhase 2-2: RCãƒ»Wäº‹æ¥­éƒ¨è¿½åŠ ï¼‰
        const allSimulatorData = {
            // SRäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿
            srData: {
                monthlySales: [2236, 2917, 2927, 2810, 2544, 2664, 3008, 2325, 2403, 2603, 2229, 2722],
                storeData: {
                    'æ¸…æ°´åº—': [416, 397, 421, 502, 471, 544, 567, 476, 355, 408, 299, 346],
                    'é™å²¡åº—': [369, 386, 600, 535, 285, 437, 351, 270, 369, 391, 256, 242],
                    'æ›å·åº—': [284, 375, 508, 278, 394, 394, 377, 309, 248, 469, 448, 535],
                    'å¸‚é‡åº—': [328, 547, 723, 520, 528, 607, 574, 318, 714, 657, 700, 600],
                    'ä½é³´å°åº—': [349, 719, 247, 433, 308, 265, 516, 311, 222, 293, 272, 379],
                    'åºƒå³¶åº—': [490, 493, 427, 542, 558, 416, 622, 641, 496, 385, 253, 620]
                },
                annualTotals: {
                    sales: 31388,
                    operatingProfit: -454,
                    profitMargin: -1.4,
                    predictionAccuracy: 91.2
                }
            },

            // RCäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ‡ãƒ«åˆ†æï¼‰
            rcData: {
                baseMonthlySales: 1500, // åŸºæº–å£²ä¸Š1500ä¸‡å††/æœˆ
                annualTotals: {
                    sales: 18000, // å¹´é–“å£²ä¸Šï¼ˆåŸºæº–å£²ä¸ŠÃ—12ï¼‰
                    operatingProfit: 1012, // ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ‡ãƒ«æœ€é©åŒ–å¾Œ
                    profitMargin: 5.6,
                    fixedCostRate: 29.8,
                    exhibitionROI: 155.2
                },
                exhibitions: {
                    december: { cost: 90, roi: 155.0 }, // BWJæ±äº¬12æœˆ
                    may: { cost: 90, roi: 210.9 }       // BWJæ–½å·¥è²»5æœˆ
                },
                costs: {
                    personnel: 50,      // å›ºå®šäººä»¶è²»50ä¸‡å††/æœˆ
                    travel: 15,         // æ—…è²»äº¤é€šè²»15ä¸‡å††/æœˆ
                    fees: 70,           // æ”¯æ‰•æ‰‹æ•°æ–™70ä¸‡å††/æœˆ
                    advertising: 60     // åºƒå‘Šå®£ä¼è²»60ä¸‡å††/æœˆ
                }
            },

            // Wäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ï¼ˆå›ºå®šé‡‘é¡æ–¹å¼ãƒ»å­£ç¯€å¤‰å‹•ç®¡ç†ï¼‰
            wData: {
                monthlySales: [887, 500, 670, 1175, 1258, 2331, 713, 772, 866, 824, 608, 923],
                annualTotals: {
                    sales: 11527, // å¹´é–“å£²ä¸Š
                    operatingProfit: 296, // å›ºå®šé‡‘é¡æ–¹å¼ã«ã‚ˆã‚‹å–¶æ¥­åˆ©ç›Š
                    profitMargin: 2.6,
                    efficiency: 85.4
                },
                personnelSystem: {
                    method: 'å›ºå®šé‡‘é¡æ–¹å¼',
                    ranges: 12,          // 12æ®µéšç®¡ç†
                    current: 221,        // ç¾åœ¨æ®µéšï¼ˆ221ä¸‡å††ï¼‰
                    min: 201,           // æœ€ä½æ®µéšï¼ˆ201ä¸‡å††ï¼‰
                    max: 424            // æœ€é«˜æ®µéšï¼ˆ424ä¸‡å††ï¼‰
                },
                paymentOptimization: {
                    creditRate: 3.24,   // ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ‰‹æ•°æ–™ç‡
                    qrRate: 1.89,       // QRã‚³ãƒ¼ãƒ‰æ‰‹æ•°æ–™ç‡
                    reduction: 13.4,    // å‰Šæ¸›ç‡
                    annualEffect: 456   // å¹´é–“åŠ¹æœï¼ˆä¸‡å††ï¼‰
                }
            }
        };

        // çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆPhase 2-2ï¼‰
        let integratedData = {
            srData: allSimulatorData.srData,
            rcData: allSimulatorData.rcData,
            wData: allSimulatorData.wData,
            // RCDäº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿ï¼ˆå¤–éƒ¨å§”è¨—å‹ç‰¹æ®Šå‡¦ç†ï¼‰
            rcdData: {
                monthlySales: [11037, 14297, 11504, 14664, 12507, 14920, 13661, 15455, 14439, 15857, 15478, 16360],
                annualTotals: {
                    sales: 170179, // å®Ÿç¸¾æº–æ‹ å¹´é–“å£²ä¸Š
                    operatingProfit: 4909, // å®Ÿç¸¾æº–æ‹ å–¶æ¥­åˆ©ç›Š
                    profitMargin: 2.9,
                    efficiency: 89.4
                },
                specialProcessing: {
                    personnel: 0,        // å¤–éƒ¨å§”è¨—ã«ã‚ˆã‚Š0å††
                    logistics: 0,        // å¤–éƒ¨å§”è¨—ã«ã‚ˆã‚Š0å††  
                    promotion: 0,        // å¤–éƒ¨å§”è¨—ã«ã‚ˆã‚Š0å††
                    advertising: 0,      // å¤–éƒ¨å§”è¨—ã«ã‚ˆã‚Š0å††
                    supplies: 0,         // å¤–éƒ¨å§”è¨—ã«ã‚ˆã‚Š0å††
                    consulting: 0,       // å¤–éƒ¨å§”è¨—ã«ã‚ˆã‚Š0å††
                    depreciation: 0,     // å¤–éƒ¨å§”è¨—ã«ã‚ˆã‚Š0å††
                    others: 0           // å¤–éƒ¨å§”è¨—ã«ã‚ˆã‚Š0å††
                },
                costStructure: {
                    unitPurchase: 2000,  // ä»•å…¥å˜ä¾¡2000ä¸‡å††/æœ¬
                    profitRate: 0.03,    // åˆ©ç›Šç‡3%å›ºå®š
                    taxRate: 0.10,       // ç¨ç‡10%
                    feeRate: 0.04,       // æ‰‹æ•°æ–™ç‡4%
                    unitFee: 90.6        // 1ä»¶90.6ä¸‡å††æ‰‹æ•°æ–™
                }
            }
        };

        // çµ±åˆãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆç®—
        function calculateIntegratedMetrics() {
            const totalSales = integratedData.srData.annualTotals.sales + 
                             integratedData.rcData.annualTotals.sales + 
                             integratedData.wData.annualTotals.sales;
            
            const totalProfit = integratedData.srData.annualTotals.operatingProfit + 
                              integratedData.rcData.annualTotals.operatingProfit + 
                              integratedData.wData.annualTotals.operatingProfit;
            
            const avgPredictionAccuracy = (integratedData.srData.annualTotals.predictionAccuracy + 
                                         integratedData.rcData.annualTotals.exhibitionROI/2 + 
                                         integratedData.wData.annualTotals.efficiency) / 3;
            
            return {
                totalSales: totalSales,
                totalProfit: totalProfit,
                profitMargin: (totalProfit / totalSales * 100).toFixed(1),
                avgAccuracy: avgPredictionAccuracy.toFixed(1)
            };
        }

        // å…¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿é–¢æ•°
        function loadAllSimulatorData() {
            console.log('å…¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿é–‹å§‹...');
            
            const metrics = calculateIntegratedMetrics();
            
            // çµ±åˆãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
            document.getElementById('total-sales').textContent = metrics.totalSales.toLocaleString();
            document.getElementById('operating-profit').textContent = metrics.totalProfit.toLocaleString();
            document.getElementById('profit-margin').textContent = metrics.profitMargin + '%';
            document.getElementById('prediction-accuracy').textContent = metrics.avgAccuracy + '%';

            // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ›´æ–°
            updateTimestamp();
            
            // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            showSuccessMessage('3äº‹æ¥­éƒ¨çµ±åˆãƒ‡ãƒ¼ã‚¿ã®å–ã‚Šè¾¼ã¿ãŒå®Œäº†ã—ã¾ã—ãŸï¼ˆPhase 2-2ï¼‰');
        }

        // ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§æ¤œè¨¼
        function validateDataIntegrity() {
            console.log('çµ±åˆãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§æ¤œè¨¼é–‹å§‹...');
            
            const validation = {
                srDataValid: integratedData.srData && integratedData.srData.annualTotals,
                rcDataValid: integratedData.rcData && integratedData.rcData.annualTotals,
                wDataValid: integratedData.wData && integratedData.wData.annualTotals,
                totalIntegrity: true
            };
            
            validation.totalIntegrity = validation.srDataValid && validation.rcDataValid && validation.wDataValid;
            
            if (validation.totalIntegrity) {
                showSuccessMessage('ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§æ¤œè¨¼å®Œäº†: 3äº‹æ¥­éƒ¨ãƒ‡ãƒ¼ã‚¿çµ±åˆæ­£å¸¸');
            } else {
                showErrorMessage('ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚¨ãƒ©ãƒ¼æ¤œå‡º: çµ±åˆãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¦ãã ã•ã„');
            }
            
            console.log('æ•´åˆæ€§æ¤œè¨¼çµæœ:', validation);
        }

        // ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§æ¤œè¨¼ï¼ˆ4äº‹æ¥­éƒ¨å¯¾å¿œï¼‰
        function validateDataIntegrity() {
            console.log('4äº‹æ¥­éƒ¨çµ±åˆãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§æ¤œè¨¼é–‹å§‹...');
            
            const validation = {
                srDataValid: integratedData.srData && integratedData.srData.annualTotals,
                rcDataValid: integratedData.rcData && integratedData.rcData.annualTotals,
                wDataValid: integratedData.wData && integratedData.wData.annualTotals,
                rcdDataValid: integratedData.rcdData && integratedData.rcdData.annualTotals,
                totalIntegrity: true
            };
            
            validation.totalIntegrity = validation.srDataValid && validation.rcDataValid && 
                                      validation.wDataValid && validation.rcdDataValid;
            
            if (validation.totalIntegrity) {
                showSuccessMessage('ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§æ¤œè¨¼å®Œäº†: 4äº‹æ¥­éƒ¨çµ±åˆãƒ‡ãƒ¼ã‚¿æ­£å¸¸ç¨¼åƒä¸­');
            } else {
                showErrorMessage('ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚¨ãƒ©ãƒ¼æ¤œå‡º: çµ±åˆãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¦ãã ã•ã„');
            }
            
            console.log('4äº‹æ¥­éƒ¨æ•´åˆæ€§æ¤œè¨¼çµæœ:', validation);
        }

        // å…¨ãƒ‡ãƒ¼ã‚¿åŒæœŸï¼ˆPhase 2-3å®Œæˆï¼‰
        function syncAllData() {
            console.log('4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆãƒ‡ãƒ¼ã‚¿åŒæœŸé–‹å§‹...');
            loadCompleteIntegratedData();
            
            showSuccessMessage('4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆãƒ‡ãƒ¼ã‚¿åŒæœŸå®Œäº†ï¼ˆPhase 2-3: SRãƒ»RCãƒ»Wãƒ»RCDäº‹æ¥­éƒ¨å®Œå…¨çµ±åˆï¼‰');
        }

        // çµ±åˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆPhase 2-3å¯¾å¿œï¼‰
        function generateIntegratedReport() {
            console.log('4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆé–‹å§‹...');
            generateConsolidatedPL();
        }

        // æ—§é–¢æ•°ã¨ã®äº’æ›æ€§ç¶­æŒ
        function loadAllSimulatorData() {
            loadCompleteIntegratedData();
        }

        // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        function showErrorMessage(message) {
            const existingAlert = document.querySelector('.temp-alert');
            if (existingAlert) {
                existingAlert.remove();
            }
            
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-danger temp-alert';
            alertDiv.style.background = '#f8d7da';
            alertDiv.style.borderColor = '#f5c6cb';
            alertDiv.style.color = '#721c24';
            alertDiv.innerHTML = '<strong>âŒ ã‚¨ãƒ©ãƒ¼:</strong> ' + message;
            
            const container = document.querySelector('.container');
            container.insertBefore(alertDiv, container.children[2]);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        function showSuccessMessage(message) {
            const existingAlert = document.querySelector('.temp-alert');
            if (existingAlert) {
                existingAlert.remove();
            }
            
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-success temp-alert';
            alertDiv.innerHTML = '<strong>âœ… å‡¦ç†å®Œäº†:</strong> ' + message;
            
            const container = document.querySelector('.container');
            container.insertBefore(alertDiv, container.children[2]);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ›´æ–°
        function updateTimestamp() {
            const now = new Date();
            document.getElementById('last-update').textContent = now.toLocaleString('ja-JP');
        }

        // åˆæœŸåŒ–ï¼ˆPhase 2-3å®Œæˆï¼‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - 4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆç‰ˆï¼ˆPhase 2-3å®Œæˆï¼‰åˆæœŸåŒ–');
            loadCompleteIntegratedData();
            updateTimestamp();
        });

        // 5åˆ†ã”ã¨ã®è‡ªå‹•ãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼ˆ4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆé€£æºï¼‰
        setInterval(function() {
            updateTimestamp();
            console.log('å®šæœŸãƒ‡ãƒ¼ã‚¿æ›´æ–° - 4äº‹æ¥­éƒ¨å®Œå…¨çµ±åˆé€£æºä¸­ï¼ˆSRãƒ»RCãƒ»Wãƒ»RCDï¼‰');
        }, 300000); // 5åˆ† = 300000ms
    </script>
</body>
</html>